import*as t from"@wordpress/interactivity";var e={d:(t,o)=>{for(var a in o)e.o(o,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:o[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const o=(r={getContext:()=>t.getContext,getElement:()=>t.getElement,store:()=>t.store},l={},e.d(l,r),l),a=wp.apiFetch,{state:s,callbacks:n}=(0,o.store)("results",{state:{votes:[],totalVotes:0},actions:{determineWidth(t){const{attributes:{"data-count":e}}=(0,o.getElement)();return e/s.totalVotes*100+"%"}},callbacks:{getVotes(t=null){const e=null!=t?t:(0,o.getContext)();a({path:"/bdc/v1/results",method:"POST",data:{cid:e.conferenceId}}).then((({status:t,data:e})=>{const{totalVotes:o,votes:a}=e,n=a.sort(((t,e)=>parseFloat(e.count)-parseFloat(t.count)));s.totalVotes=o,s.votes=n}))},timeout(){const t=(0,o.getContext)();window.requestAnimationFrame((e=>{e>2e3&&(console.log("getting that data\t"),n.getVotes(t)),window.requestAnimationFrame(n.timeout)}))}}});var r,l;