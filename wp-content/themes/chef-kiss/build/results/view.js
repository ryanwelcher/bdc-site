(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React,n=window.wp.element,o=window.wp.domReady;var s=e.n(o);const a=window.wp.apiFetch;var r=e.n(a);const c=window.wp.i18n,l=({conference:e})=>{const[o,s]=(0,n.useState)([]),[a,l]=(0,n.useState)(0);console.log(e);const d=e=>{console.log(`fetching votes for ${e}`),r()({path:"/bdc/v1/results",method:"POST",data:{cid:e}}).then((({status:e,data:t})=>{const{totalVotes:n,votes:o}=t,a=o.sort(((e,t)=>parseFloat(t.votes)-parseFloat(e.votes)));l(n),s(a)}))};(0,n.useEffect)((()=>{const t=setInterval((()=>{d(e)}),3e3);return d(e),()=>clearInterval(t)}),[]);const i=(e,t)=>e/t*100;return(0,t.createElement)("div",{className:"results"},(0,t.createElement)("ul",null,o.map((({id:e,title:n,votes:o})=>(0,t.createElement)("li",{className:"vote-bar",key:e},(0,t.createElement)("h3",null,n),(0,t.createElement)("div",{className:"vote-progress"},(0,t.createElement)("div",{className:"vote-progress-inner",style:{width:`${i(o,a)}%`}},(0,c._n)(`${o} Vote`,`${o} Votes`,o))))))))};s()((()=>{const e=document.getElementById("results-display");n.createRoot?(0,n.createRoot)(document.getElementById("results-display")).render((0,t.createElement)(l,{conference:e.dataset?.cid})):(0,n.render)((0,t.createElement)(l,{conference:e.dataset?.cid}),document.getElementById("results-display"))}))})();