import*as e from"@wordpress/interactivity";var t={d:(e,d)=>{for(var s in d)t.o(d,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:d[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const d=(o={getContext:()=>e.getContext,store:()=>e.store},c={},t.d(c,o),c),s=wp.apiFetch,{state:i}=(0,d.store)("chef-kiss",{state:{get buttonCTA(){const{addCTA:e,removeCTA:t,isVoteLoading:s,savingCTA:o}=(0,d.getContext)();return s?o:i.isSelected?t:e},get isSelected(){const{recipeId:e}=(0,d.getContext)();return i.selectedRecipes.includes(e)}},actions:{vote:async()=>{const e=(0,d.getContext)(),{time:t,recipeId:o,added:c,user:a}=e;e.isVoteLoading=!0,c?(i.assigned-=Number(t),i.selectedRecipes=i.selectedRecipes.filter((e=>e!==o))):(i.assigned+=Number(t),i.selectedRecipes.push(o));try{"success"===(await s({path:"/bdc/v1/vote",method:"POST",data:{user_id:a,conference_id:i.conferenceId,recipe_id:o,action:c?"remove":"add"}})).status&&(e.added=!e.added),e.isVoteLoading=!1}catch(e){console.log(e)}}},callbacks:{canBeAdded:()=>{const e=(0,d.getContext)();if(e.isVoteLoading)return e.disabled=!0;i.selectedRecipes.includes(e.recipeId)?e.disabled=!1:e.disabled=e.time>i.allowedValue-i.assigned},isAdded:()=>{(0,d.getContext)().added=i.isSelected}}});var o,c;