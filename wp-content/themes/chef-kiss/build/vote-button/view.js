import*as e from"@wordpress/interactivity";var t={d:(e,d)=>{for(var s in d)t.o(d,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:d[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const d=(o={getContext:()=>e.getContext,store:()=>e.store},i={},t.d(i,o),i),s=wp.apiFetch,{state:c}=(0,d.store)("chef-kiss",{state:{get buttonCTA(){const{addCTA:e,removeCTA:t}=(0,d.getContext)();return c.isSelected?t:e},get isSelected(){const{recipeId:e}=(0,d.getContext)();return c.selectedRecipes.includes(e)}},actions:{vote:async()=>{const e=(0,d.getContext)(),{time:t,recipeId:o,added:i,user:a}=e;e.isVoteLoading=!0,i?(c.assigned-=Number(t),c.selectedRecipes=c.selectedRecipes.filter((e=>e!==o))):(c.assigned+=Number(t),c.selectedRecipes.push(o));try{"success"===(await s({path:"/bdc/v1/vote",method:"POST",data:{user_id:a,conference_id:c.conferenceId,recipe_id:o,action:i?"remove":"add"}})).status&&(e.added=!e.added),e.isVoteLoading=!1}catch(e){console.log(e)}}},callbacks:{canBeAdded:()=>{const e=(0,d.getContext)();if(e.isVoteLoading)return e.disabled=!0;c.selectedRecipes.includes(e.recipeId)?e.disabled=!1:e.disabled=e.time>c.allowedValue-c.assigned},isAdded:()=>{(0,d.getContext)().added=c.isSelected}}});var o,i;